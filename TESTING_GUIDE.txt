ğŸ¯ QUICK TEST GUIDE - CORS FIX VERIFICATION

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ… BACKEND STATUS:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
âœ“ Server Running: http://localhost:8000
âœ“ API Docs: http://localhost:8000/docs
âœ“ Uploads Endpoint: POST /api/uploads/upload
âœ“ Static Files: GET /uploads/[filename]

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“‹ STEP-BY-STEP TEST:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

1. VERIFY BACKEND IS WORKING:
   âœ“ Open browser: http://localhost:8000/docs
   âœ“ Should see Swagger UI with endpoints
   âœ“ Look for "File Uploads" section

2. TEST FILE UPLOAD ENDPOINT:
   âœ“ In Swagger UI, expand "File Uploads"
   âœ“ Click "POST /api/uploads/upload"
   âœ“ Click "Try it out"
   âœ“ Choose a test image/video file
   âœ“ Click "Execute"
   âœ“ Should see response:
     {
       "success": true,
       "filename": "1705000000000_photo",
       "url": "/uploads/1705000000000_photo",
       ...
     }

3. VERIFY FILE UPLOAD WORKS:
   âœ“ Copy the URL from response: /uploads/1705000000000_photo
   âœ“ Open: http://localhost:8000/uploads/1705000000000_photo
   âœ“ Should display/download the file

4. TEST IN CITIZENAPP:
   âœ“ Open CitizenApp: http://localhost:5173
   âœ“ Login with test account
   âœ“ Go to "Report Problem"
   âœ“ Fill out form:
     - Category: Select one
     - Description: "Test report"
     - Location: Get Location (or type manually)
     - Photo: Take a photo or upload image
   âœ“ Click "Submit Report"
   âœ“ Expected: âœ“ Report submitted successfully
   âœ“ NO MORE CORS ERRORS in console

5. VERIFY REPORT SAVED:
   âœ“ Go to "Track Reports" page
   âœ“ Should see your submitted report
   âœ“ Image should load (from backend /uploads/)
   âœ“ Status shows "submitted"

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ” DEBUGGING IF ISSUES OCCUR:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Issue: Upload endpoint returns 404
âœ“ Fix: Check backend console for errors
âœ“ Restart backend: Ctrl+C, then run:
  cd "d:\Minor Project\backend"
  venv\Scripts\python -m uvicorn main:app --reload

Issue: File uploads but image doesn't show in report
âœ“ Check: Browser DevTools â†’ Network tab
âœ“ Look for: GET /uploads/[filename]
âœ“ Should return 200, not 404
âœ“ If 404: File not saved properly

Issue: CORS errors still appearing
âœ“ Check: Browser console (F12 â†’ Console)
âœ“ Should NOT see "CORS policy" errors
âœ“ If still appearing: Verify backend is running

Issue: "Cannot POST /api/uploads/upload"
âœ“ Backend not running or routes not loaded
âœ“ Verify: http://localhost:8000/docs shows uploads section
âœ“ If not: Restart backend

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“ FILES CREATED/MODIFIED:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

NEW:
âœ“ backend/routes/uploads.py (File upload endpoint)
âœ“ backend/uploads/ (Directory for uploaded files)

MODIFIED:
âœ“ backend/main.py (Added uploads router + static mount)
âœ“ CitizenApp/src/pages/ReportProblem.jsx (Backend upload + fallback)
âœ“ CitizenApp/src/pages/Donation.jsx (Backend upload + fallback)

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ¨ EXPECTED WORKFLOW NOW:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

OLD BROKEN FLOW:
1. Click Submit
2. Tries Firebase Storage upload
3. âŒ CORS error blocked
4. âŒ Continuously loading
5. âŒ Report never submits

NEW WORKING FLOW:
1. Click Submit
2. âœ“ Uploads to backend (no CORS issues)
3. âœ“ File saved to backend/uploads/[timestamp]
4. âœ“ URL: http://localhost:8000/uploads/[filename]
5. âœ“ Report saved to Firestore with URL
6. âœ“ Shows "âœ“ Report submitted successfully"
7. âœ“ Image loads from backend
8. âœ“ Shows in "Track Reports" with image

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ‰ SUCCESS INDICATORS:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

You'll know it's working when:
âœ… No CORS errors in browser console
âœ… File uploads complete in < 5 seconds
âœ… "Report submitted successfully" message appears
âœ… Image shows in report preview
âœ… Report appears in "Track Reports" page
âœ… Status shows as "submitted"
âœ… Points are awarded (+3 points)

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“ NOTES:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

â€¢ Backend upload is the PRIMARY solution
â€¢ Firebase Storage is only a FALLBACK (if backend fails)
â€¢ All uploads are served locally (no external dependencies)
â€¢ File size limit: 50MB per file
â€¢ Files stored in: backend/uploads/
â€¢ Uploaded files are served at: http://localhost:8000/uploads/

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
